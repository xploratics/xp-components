!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(l)return l(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var l="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";function i(e){return(e||"").toLowerCase()}t.exports=["$parse",function(e){return{restrict:"E",scope:{xpItems:"=?",xpSearchText:"=?",xpSelectedItem:"=?",xpFloatingLabel:"@"},template:function(e,t){return'<md-autocomplete\n                md-items="item in _items"\n                md-item-text="'+t.xpItemText+'"\n                md-search-text="xpSearchText"\n                md-search-text-change="'+t.xpSearchTextChange+'"\n                md-selected-item="xpSelectedItem"\n                md-selected-item-change="selectedItemChange(xpSelectedItem)"\n                md-min-length="0"\n                md-autoselect="true"\n                md-match-case-insensitive="true"\n                md-floating-label="{{xpFloatingLabel}}">\n                    <md-item-template>\n                        <span md-highlight-text="xpSearchText" md-highlight-flags="i">{{'+t.xpItemText+"}}</span>\n                    </md-item-template>\n            </md-autocomplete>"},link:function(t,n,r){var l=e(r.xpItemText);t._items=[],t._search_text="",t.selectedItemChange=function(e){return t.$parent.$eval(r.xpSelectedItemChange,{item:e})},t.$watch("[xpItems,xpSearchText]",function(e){var n=e[0]||[],r=e[1]||"",o=[];r=i(r);for(var a=0;a<n.length;a++)r&&i(l(t,{item:n[a]})).indexOf(r)===-1||o.push(n[a]);t._items=o},!0)}}}]},{}],2:[function(e,t,n){"use strict";function i(e){var t={};if(e)for(var n=0;n<e.length;n++){var i=e[n],r=i.filters||[];r.length&&(t[i.name]=r)}return t}function r(e){for(var t="",n=0;n<e.length;n++){t&&(t+=",");var i=e[n];i.sort&&(t+=i.name+":"+i.sort.direction)}return t}t.exports=["$q",function(e){return{restrict:"E",scope:!0,template:'<div layout="column" class="xp-grid">\n            <xp-gridfilter-button xp-grid-options="options" layout="row" layout-align="end center"></xp-gridfilter-button>\n            <div ui-grid="options" flex ui-grid-resize-columns ui-grid-move-columns ui-grid-infinite-scroll></div>\n        </div>',link:function(t,n,l){function o(){s.onNext(!1)}function a(e,t){c=r(t),s.onNext(!0)}var c,d,u=0,s=new Rx.Subject;t.options=t.$parent.$eval(l.xpGridOptions||"{}")||{};var p=angular.extend(t.options,{data:[],infiniteScrollRowsFromEnd:100,infiniteScrollDown:!0,onRegisterApi:function(e){t.options.gridApi=e,e.core.on.sortChanged(t,a),a(e.grid,[p.columnDefs[1]]),e.infiniteScroll.on.needLoadMoreData(t,o)}});p.refresh=function(e){return s.onNext(!0)},t.$watch("options.columnDefs",function(e){return t.filters=i(e)},!0),t.$watch("filters",function(e){return s.onNext(!0)},!0),t.rowClick=function(e){p.selectedRow=e.row,p.rowClick&&p.rowClick(e)},s.map(function(e){return d|=e}).debounce(1).$apply(t).flatMapLatest(function(n){d=!1,n&&(u=1,p.data=[],p.selectedRow=null);var i=angular.extend({page:u,sort:c,pageSize:100},t.filters),r=p.fetch(i);return r.subscribe||(r=Rx.Observable.fromPromise(e.when(r))),r.catch(function(e){return Rx.Observable.empty()})}).$apply(t).tap(function(e){u++,p.data=p.data.concat(e),t.options.gridApi.infiniteScroll.dataLoaded(!1,e.length>=100)}).subscribe()}}}]},{}],3:[function(e,t,n){"use strict";t.exports=["xpGridfilterDialog","$parse",function(e,t){return{scope:!0,template:'<md-button aria-label="Filter" ng-click="showDialog()" ng-class="{\'md-primary\': filtered()}">\n            <ng-md-icon icon="filter_list"></ng-md-icon>\n        </md-button>',link:function(n,i,r){var l=t(r.xpGridOptions);n.filtered=function(){var e=l(n)||0,t=e.columnDefs;if(t)for(var i=0;i<t.length;i++)if(t[i].filters&&t[i].filters.length)return!0},n.showDialog=function(){var t=l(n)||{};e({gridOptions:t})}}}}]},{}],4:[function(e,t,n){"use strict";t.exports=["xpComponentsTranslateService",function(e){return function(t){return e(t.substring(2))||t}}]},{}],5:[function(e,t,n){"use strict";t.exports=[function(){var e="en",t=function t(n){return t.locales[e][n]};return t.lang=function(t){return t?void(e=t):e},t.locales={en:{Apply:"Apply",Cancel:"Cancel",ChooseAColumn:"Choose a column",DeleteAll:"Delete All",Filters:"Filters",From:"From",To:"To"},fr:{Apply:"Appliquer",Cancel:"Annuler",ChooseAColumn:"Choisissez une colonne",DeleteAll:"Supprimer tout",Filters:"Filtres",From:"De",To:"Ã€"}},t}]},{}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=["$filter",function(e){var t=function(){function t(){i(this,t)}return r(t,[{key:"getColumnDisplayName",value:function(t){var n=angular.isUndefined(t.displayName)?t.field:t.displayName;return t.headerCellFilter&&(n=e(t.headerCellFilter)(n)),n}}]),t}();return new t}]},{}],7:[function(e,t,n){"use strict";function i(e,t){return e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0}function r(e){for(var t=[],n=0;n<e.length;n++)for(var i=e[n],r=angular.copy(i.columnDef.filters||[]),l=0;l<r.length;l++){var o=r[l];o.column=i,t.push(o)}return t}function l(e,t){for(var n=0;n<e.length;n++)e[n].columnDef.filters=[];for(var n=0;n<t.length;n++){var i=t[n];i.column.columnDef.filters.push(i),delete i.column}}t.exports=["$mdDialog","$timeout",function(e,t){return function(n){var o=n.gridOptions,a={bindToController:!0,clickOutsideToClose:!0,controller:["$scope","$mdDialog","xpGridService",function(e,n,a){e.columns=o.columnDefs.map(function(e){return{columnDef:e,displayName:a.getColumnDisplayName(e)}}).sort(i),e.filters=r(e.columns),e.apply=function(t){l(e.columns,e.filters),n.hide(t)},e.cancel=function(e){return n.cancel()},e.autoCompleteText="",e.selectedColumn=null,e.removeFilter=function(t){var n=e.filters.indexOf(t);n!==-1&&e.filters.splice(n,1)},e.selectedColumnChanged=function(n){n&&(e.filters.unshift({column:n}),t(function(){e.autoCompleteText="",e.selectedColumn=null;var t=document.querySelector(".xp-gridfilter-item input");t&&t.focus()}))}}],escapeToClose:!0,templateUrl:"/templates/xp-gridfilter-dialog.html"};return e.show(a)}}]},{}],8:[function(e,t,n){"use strict";e("./xp-gridfilter-date.html"),e("./xp-gridfilter-dialog.html"),e("./xp-gridfilter-number.html"),e("./xp-gridfilter-string.html");var i=e("./uiGridHeaderCell.html"),r=e("./ui-grid-row.html"),l=e("./ui-grid-header.html");t.exports=["$templateCache",function(e){e.put("ui-grid/uiGridHeaderCell",e.get(i)),e.put("ui-grid/ui-grid-row",e.get(r)),e.put("ui-grid/ui-grid-header",e.get(l))}]},{"./ui-grid-header.html":9,"./ui-grid-row.html":10,"./uiGridHeaderCell.html":11,"./xp-gridfilter-date.html":12,"./xp-gridfilter-dialog.html":13,"./xp-gridfilter-number.html":14,"./xp-gridfilter-string.html":15}],9:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/ui-grid-header.html",'<div\n  role="rowgroup"\n  class="ui-grid-header"> <!-- theader -->\n  <div\n    class="ui-grid-top-panel">\n    <div\n      class="ui-grid-header-viewport">\n      <div\n        class="ui-grid-header-canvas">\n        <div\n          class="ui-grid-header-cell-wrapper"\n          ng-style="colContainer.headerCellWrapperStyle()">\n          <div\n            role="row"\n            class="ui-grid-header-cell-row">\n            <div\n              class="ui-grid-header-cell ui-grid-clearfix"\n              ng-repeat="col in colContainer.renderedColumns track by col.uid"\n              ui-grid-header-cell\n              md-colors="::{background: \'background\'}"\n              col="col"\n              render-index="$index">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}]),t.exports="/templates/ui-grid-header.html"},{}],10:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/ui-grid-row.html",'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.uid" ui-grid-one-bind-id-grid="rowRenderIndex + \'-\' + col.uid + \'-cell\'"\n    class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" md-colors="::{background: \'background-hue-\' + (rowRenderIndex % 2 + 1)}" role="{{col.isRowHeader ? \'rowheader\' : \'gridcell\'}}"\n    ui-grid-cell ng-click="$parent.$parent.$parent.$parent.$parent.$parent.$parent.rowClick({ event: $event, row: row, col: col })">\n</div>')}]),t.exports="/templates/ui-grid-row.html"},{}],11:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/uiGridHeaderCell.html",'<div\n  role="columnheader"\n  ng-class="{ \'sortable\': sortable }"\n  ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'"\n  aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}">\n  <md-button\n    role="button"\n    tabindex="0"\n    class="ui-grid-cell-contents ui-grid-header-cell-primary-focus"\n    col-index="renderIndex"\n    title="TOOLTIP">\n    <span\n      class="ui-grid-header-cell-label"\n      ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">\n      {{ col.displayName CUSTOM_FILTERS }}\n    </span>\n\n    <span\n      ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'"\n      ui-grid-visible="col.sort.direction"\n      aria-label="{{getSortDirectionAriaLabel()}}">\n      <i\n       ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }"\n       title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}"\n       aria-hidden="true">\n     </i>\n     <sub\n       ui-grid-visible="isSortPriorityVisible()"\n       class="ui-grid-sort-priority-number">\n       {{col.sort.priority + 1}}\n     </sub>\n    </span>\n  </md-button>\n\n  <div ui-grid-filter></div>\n</div>')}]),t.exports="/templates/uiGridHeaderCell.html"},{}],12:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-date.html",'<div layout="row" layout-align="center center">\n    <label ng-bind="filter.column.displayName"></label>\n    <md-input-container>\n        <label>{{\'t.From\' | xpComponentsTranslate}}</label>\n        <md-datepicker ng-model="filter.from" ng-change="filter.to = filter.from && filter.to && filter.to < filter.from ? filter.from : filter.to"></md-datepicker>\n    </md-input-container>\n    <md-input-container>\n        <label>{{\'t.To\' | xpComponentsTranslate}}</label>\n        <md-datepicker ng-model="filter.to" ng-change="filter.from = filter.from && filter.to && filter.from > filter.to ? filter.to : filter.from"></md-datepicker>\n    </md-input-container>\n</div>')}]),t.exports="/templates/xp-gridfilter-date.html"},{}],13:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-dialog.html",'<md-dialog class="xp-gridfilter" aria-label="GridFilter" layout-padding>\n    <div class="dialogHeader" flex="auto">\n        <span>{{\'t.Filters\' | xpComponentsTranslate }}</span>\n\n        <xp-autocomplete\n            xp-floating-label="{{ \'t.ChooseAColumn\' | xpComponentsTranslate }}"\n            xp-items="columns"\n            xp-item-text="item.displayName"\n            xp-search-text="autoCompleteText"\n            xp-selected-item="selectedColumn"\n            xp-selected-item-change="selectedColumnChanged(item)"/>\n    </div>\n\n    <md-dialog-content flex="100">\n        <md-list>\n            <md-list-item class="secondary-button-padding xp-gridfilter-item" ng-repeat="filter in filters">\n                <ng-include flex="auto" src="\'/templates/xp-gridfilter-\' + (filter.column.columnDef.filterType || \'string\') + \'.html\'"></ng-include>\n                <md-button aria-label="RemoveFilter" class="md-secondary" ng-click="removeFilter(filter)"><ng-md-icon icon="delete"></ng-md-icon></md-button>\n            </md-list-item>\n        </md-list>\n    </md-dialog-content>\n\n    <md-dialog-actions flex="auto">\n        <md-button aria-label="DeleteAll" ng-click="filters = []" ng-disabled="!filters.length">{{\'t.DeleteAll\' | xpComponentsTranslate}}</md-button>\n        <md-button aria-label="Cancel" ng-click="cancel()">{{\'t.Cancel\' | xpComponentsTranslate}}</md-button>\n        <md-button aria-label="Apply" ng-click="apply(filters)">{{\'t.Apply\' | xpComponentsTranslate}}</md-button>\n    </md-dialog-actions>\n</md-dialog>')}]),t.exports="/templates/xp-gridfilter-dialog.html"},{}],14:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-number.html",'<div layout="row" layout-align="center center">\n    <label ng-bind="filter.column.displayName"></label>\n    <md-input-container>\n        <label>{{\'t.From\' | xpComponentsTranslate}}</label>\n        <md-input ng-model="filter.from"></md-input>\n    </md-input-container>\n    <md-input-container>\n        <label>{{\'t.To\' | xpComponentsTranslate}}</label>\n        <md-input ng-model="filter.to"></md-input>\n    </md-input-container>\n</div>')}]),t.exports="/templates/xp-gridfilter-number.html"},{}],15:[function(e,t,n){var i;try{i=angular.module("xp.components")}catch(e){i=angular.module("xp.components",[])}i.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-string.html",'<md-input-container class="md-block">\n  <label ng-bind="filter.column.displayName"></label>\n  <input type="text" ng-model="filter.value" required>\n</md-input-container>')}]),t.exports="/templates/xp-gridfilter-string.html"},{}],16:[function(e,t,n){"use strict";Rx.Observable.prototype.$apply=function(e,t){var n=this;return new Rx.AnonymousObservable(function(t){return n.subscribe(function(n){e.$apply(function(){t.onNext(n)})},t.onError.bind(t),t.onCompleted.bind(t))})}},{}],17:[function(e,t,n){"use strict";angular.module("xp.components",["ngMaterial","ngMdIcons","ui.grid","ui.grid.resizeColumns","ui.grid.moveColumns","ui.grid.infiniteScroll"]).directive("xpAutocomplete",e("./directives/xp-autocomplete")).directive("xpGrid",e("./directives/xp-grid")).directive("xpGridfilterButton",e("./directives/xp-gridfilter-button")).filter("xpComponentsTranslate",e("./filters/xpComponentsTranslate")).factory("xpGridfilterDialog",e("./services/xpGridfilterDialog")).factory("xpGridService",e("./services/xpGridService")).factory("xpComponentsTranslateService",e("./services/xpComponentsTranslateService")).run(e("./templates")),e("./utils/rx")},{"./directives/xp-autocomplete":1,"./directives/xp-grid":2,"./directives/xp-gridfilter-button":3,"./filters/xpComponentsTranslate":4,"./services/xpComponentsTranslateService":5,"./services/xpGridService":6,"./services/xpGridfilterDialog":7,"./templates":8,"./utils/rx":16}]},{},[17]);