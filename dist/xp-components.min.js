!function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(l)return l(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var l="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){return(e||"").toLowerCase()}t.exports=["$parse","$http",function(e,t){return{restrict:"E",scope:{xpFetch:"@",xpItems:"=?",xpSearchText:"=?",xpSelectedItem:"=?",xpFloatingLabel:"@",xpValue:"=?"},template:function(e,t){return'<md-autocomplete\n                md-items="item in _items"\n                md-item-text="'+t.xpItemText+'"\n                md-search-text="xpSearchText"\n                md-search-text-change="'+t.xpSearchTextChange+'"\n                md-selected-item="xpSelectedItem"\n                md-selected-item-change="selectedItemChange(xpSelectedItem)"\n                md-min-length="0"\n                md-autoselect="true"\n                md-match-case-insensitive="true"\n                md-input-name="'+t.xpInputName+'"\n                md-floating-label="{{xpFloatingLabel}}">\n                    <md-item-template>\n                        <span md-highlight-text="xpSearchText" md-highlight-flags="i">{{'+t.xpItemText+"}}</span>\n                    </md-item-template>\n            </md-autocomplete>"},link:function(n,i,l){var o=e(l.xpItemText);n._items=[],n._search_text="",l.xpFetch&&t({url:l.xpFetch}).then(function(e){return n.xpItems=e.data}),n.selectedItemChange=function(e){return n.$parent.$eval(l.xpSelectedItemChange,{item:e})},n.$watch("[xpItems,xpSearchText]",function(e){var t=e[0]||[],i=e[1]||"",l=[];i=r(i);for(var a=0;a<t.length;a++)i&&r(o(n,{item:t[a]})).indexOf(i)===-1||l.push(t[a]);n._items=l},!0)}}}]},{}],2:[function(e,t,n){"use strict";function r(e){var t={};if(e)for(var n=0;n<e.length;n++){var r=e[n],i=r.filters||[];i.length&&(t[r.name]=i)}return t}function i(e){for(var t="",n=0;n<e.length;n++){t&&(t+=",");var r=e[n];r.sort&&(t+=r.name+":"+r.sort.direction)}return t}t.exports=["$q","$http",function(e,t){return{restrict:"E",scope:!0,template:'<div layout="column" class="xp-grid">\n            <xp-gridfilter-button xp-grid-options="options" layout="row" layout-align="end center"></xp-gridfilter-button>\n            <div ui-grid="options" flex ui-grid-resize-columns ui-grid-move-columns ui-grid-infinite-scroll></div>\n        </div>',link:function(n,l,o){function a(){p.onNext(!1)}function c(e,t){d=i(t),p.onNext(!0)}var d,u,s=0,p=new Rx.Subject;n.options=n.$parent.$eval(o.xpGridOptions||"{}")||{};var m=angular.extend(n.options,{data:[],infiniteScrollRowsFromEnd:100,infiniteScrollDown:!0,onRegisterApi:function(e){n.options.gridApi=e,e.core.on.sortChanged(n,c),c(e.grid,[m.columnDefs[1]]),e.infiniteScroll.on.needLoadMoreData(n,a)}});m.refresh=function(e){return p.onNext(!0)},n.$watch("options.columnDefs",function(e){return n.filters=r(e)},!0),n.$watch("filters",function(e){return p.onNext(!0)},!0),n.rowClick=function(e){m.selectedRow=e.row,m.rowClick&&m.rowClick(e)},p.map(function(e){return u|=e}).debounce(1).$apply(n).flatMapLatest(function(r){u=!1,r&&(s=1,m.data=[],m.selectedRow=null);var i=angular.extend({page:s,sort:d,pageSize:100},n.filters),l="string"==typeof m.fetch?t({url:m.fetch,params:i}):m.fetch(i);return l.subscribe||(l=Rx.Observable.fromPromise(e.when(l))),l.catch(function(e){return Rx.Observable.empty()})}).$apply(n).tap(function(e){e.data&&(e=e.data),s++,m.data=m.data.concat(e),n.options.gridApi.infiniteScroll.dataLoaded(!1,e.length>=100)}).subscribe()}}}]},{}],3:[function(e,t,n){"use strict";t.exports=["xpGridfilterDialog","$parse",function(e,t){return{scope:!0,template:'<md-button aria-label="Filter" ng-click="showDialog()" ng-class="{\'md-primary\': filtered()}">\n            <ng-md-icon icon="filter_list"></ng-md-icon>\n        </md-button>',link:function(n,r,i){var l=t(i.xpGridOptions);n.filtered=function(){var e=l(n)||0,t=e.columnDefs;if(t)for(var r=0;r<t.length;r++)if(t[r].filters&&t[r].filters.length)return!0},n.showDialog=function(){var t=l(n)||{};e({gridOptions:t})}}}}]},{}],4:[function(e,t,n){"use strict";t.exports=["xpComponentsTranslateService",function(e){return function(t){return e(t.substring(2))||t}}]},{}],5:[function(e,t,n){"use strict";t.exports=[function(){var e="en",t=function t(n){return t.locales[e][n]};return t.lang=function(t){return t?void(e=t):e},t.locales={en:{Apply:"Apply",Cancel:"Cancel",ChooseAColumn:"Choose a column",DeleteAll:"Delete All",Filters:"Filters",From:"From",To:"To"},fr:{Apply:"Appliquer",Cancel:"Annuler",ChooseAColumn:"Choisissez une colonne",DeleteAll:"Supprimer tout",Filters:"Filtres",From:"De",To:"Ã€"}},t}]},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=["$filter",function(e){var t=function(){function t(){r(this,t)}return i(t,[{key:"getColumnDisplayName",value:function(t){var n=angular.isUndefined(t.displayName)?t.field:t.displayName;return t.headerCellFilter&&(n=e(t.headerCellFilter)(n)),n}}]),t}();return new t}]},{}],7:[function(e,t,n){"use strict";function r(e,t){return e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0}function i(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],i=angular.copy(r.columnDef.filters||[]),l=0;l<i.length;l++){var o=i[l];o.column=r,t.push(o)}return t}function l(e,t){for(var n=0;n<e.length;n++)e[n].columnDef.filters=[];for(var n=0;n<t.length;n++){var r=t[n];r.column.columnDef.filters.push(r),delete r.column}}t.exports=["$mdDialog","$timeout",function(e,t){return function(n){var o=n.gridOptions,a={bindToController:!0,clickOutsideToClose:!0,controller:["$scope","$mdDialog","xpGridService",function(e,n,a){e.columns=o.columnDefs.map(function(e){return{columnDef:e,displayName:a.getColumnDisplayName(e)}}).sort(r),e.filters=i(e.columns),e.apply=function(t){l(e.columns,e.filters),n.hide(t)},e.cancel=function(e){return n.cancel()},e.autoCompleteText="",e.selectedColumn=null,e.removeFilter=function(t){var n=e.filters.indexOf(t);n!==-1&&e.filters.splice(n,1)},e.selectedColumnChanged=function(n){n&&(e.filters.unshift({column:n}),t(function(){e.autoCompleteText="",e.selectedColumn=null;var t=document.querySelector(".xp-gridfilter-item input");t&&t.focus()}))}}],escapeToClose:!0,templateUrl:"/templates/xp-gridfilter-dialog.html"};return e.show(a)}}]},{}],8:[function(e,t,n){"use strict";e("./xp-gridfilter-date.html"),e("./xp-gridfilter-dialog.html"),e("./xp-gridfilter-number.html"),e("./xp-gridfilter-string.html");var r=e("./uiGridHeaderCell.html"),i=e("./ui-grid-row.html"),l=e("./ui-grid-header.html");t.exports=["$templateCache",function(e){e.put("ui-grid/uiGridHeaderCell",e.get(r)),e.put("ui-grid/ui-grid-row",e.get(i)),e.put("ui-grid/ui-grid-header",e.get(l))}]},{"./ui-grid-header.html":9,"./ui-grid-row.html":10,"./uiGridHeaderCell.html":11,"./xp-gridfilter-date.html":12,"./xp-gridfilter-dialog.html":13,"./xp-gridfilter-number.html":14,"./xp-gridfilter-string.html":15}],9:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/ui-grid-header.html",'<div\n  role="rowgroup"\n  class="ui-grid-header"> <!-- theader -->\n  <div\n    class="ui-grid-top-panel">\n    <div\n      class="ui-grid-header-viewport">\n      <div\n        class="ui-grid-header-canvas">\n        <div\n          class="ui-grid-header-cell-wrapper"\n          ng-style="colContainer.headerCellWrapperStyle()">\n          <div\n            role="row"\n            class="ui-grid-header-cell-row">\n            <div\n              class="ui-grid-header-cell ui-grid-clearfix"\n              ng-repeat="col in colContainer.renderedColumns track by col.uid"\n              ui-grid-header-cell\n              md-colors="::{background: \'background\'}"\n              col="col"\n              render-index="$index">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}]),t.exports="/templates/ui-grid-header.html"},{}],10:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/ui-grid-row.html",'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.uid" ui-grid-one-bind-id-grid="rowRenderIndex + \'-\' + col.uid + \'-cell\'"\n    class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" md-colors="::{background: \'background-hue-\' + (rowRenderIndex % 2 + 1)}" role="{{col.isRowHeader ? \'rowheader\' : \'gridcell\'}}"\n    ui-grid-cell ng-click="$parent.$parent.$parent.$parent.$parent.$parent.$parent.rowClick({ event: $event, row: row, col: col })">\n</div>')}]),t.exports="/templates/ui-grid-row.html"},{}],11:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/uiGridHeaderCell.html",'<div\n  role="columnheader"\n  ng-class="{ \'sortable\': sortable }"\n  ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'"\n  aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}">\n  <md-button\n    role="button"\n    tabindex="0"\n    class="ui-grid-cell-contents ui-grid-header-cell-primary-focus"\n    col-index="renderIndex"\n    title="TOOLTIP">\n    <span\n      class="ui-grid-header-cell-label"\n      ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">\n      {{ col.displayName CUSTOM_FILTERS }}\n    </span>\n\n    <span\n      ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'"\n      ui-grid-visible="col.sort.direction"\n      aria-label="{{getSortDirectionAriaLabel()}}">\n      <i\n       ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }"\n       title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}"\n       aria-hidden="true">\n     </i>\n     <sub\n       ui-grid-visible="isSortPriorityVisible()"\n       class="ui-grid-sort-priority-number">\n       {{col.sort.priority + 1}}\n     </sub>\n    </span>\n  </md-button>\n\n  <div ui-grid-filter></div>\n</div>')}]),t.exports="/templates/uiGridHeaderCell.html"},{}],12:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-date.html",'<div layout="row" layout-align="center center">\n    <label ng-bind="filter.column.displayName"></label>\n    <md-input-container>\n        <label>{{\'t.From\' | xpComponentsTranslate}}</label>\n        <md-datepicker ng-model="filter.from" ng-change="filter.to = filter.from && filter.to && filter.to < filter.from ? filter.from : filter.to"></md-datepicker>\n    </md-input-container>\n    <md-input-container>\n        <label>{{\'t.To\' | xpComponentsTranslate}}</label>\n        <md-datepicker ng-model="filter.to" ng-change="filter.from = filter.from && filter.to && filter.from > filter.to ? filter.to : filter.from"></md-datepicker>\n    </md-input-container>\n</div>')}]),t.exports="/templates/xp-gridfilter-date.html"},{}],13:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-dialog.html",'<md-dialog class="xp-gridfilter" aria-label="GridFilter" layout-padding>\n    <div class="dialogHeader" flex="auto">\n        <span>{{\'t.Filters\' | xpComponentsTranslate }}</span>\n\n        <xp-autocomplete\n            xp-floating-label="{{ \'t.ChooseAColumn\' | xpComponentsTranslate }}"\n            xp-items="columns"\n            xp-item-text="item.displayName"\n            xp-search-text="autoCompleteText"\n            xp-selected-item="selectedColumn"\n            xp-selected-item-change="selectedColumnChanged(item)"/>\n    </div>\n\n    <md-dialog-content flex="100">\n        <md-list>\n            <md-list-item class="secondary-button-padding xp-gridfilter-item" ng-repeat="filter in filters">\n                <ng-include flex="auto" src="\'/templates/xp-gridfilter-\' + (filter.column.columnDef.filterType || \'string\') + \'.html\'"></ng-include>\n                <md-button aria-label="RemoveFilter" class="md-secondary" ng-click="removeFilter(filter)"><ng-md-icon icon="delete"></ng-md-icon></md-button>\n            </md-list-item>\n        </md-list>\n    </md-dialog-content>\n\n    <md-dialog-actions flex="auto">\n        <md-button aria-label="DeleteAll" ng-click="filters = []" ng-disabled="!filters.length">{{\'t.DeleteAll\' | xpComponentsTranslate}}</md-button>\n        <md-button aria-label="Cancel" ng-click="cancel()">{{\'t.Cancel\' | xpComponentsTranslate}}</md-button>\n        <md-button aria-label="Apply" ng-click="apply(filters)">{{\'t.Apply\' | xpComponentsTranslate}}</md-button>\n    </md-dialog-actions>\n</md-dialog>')}]),t.exports="/templates/xp-gridfilter-dialog.html"},{}],14:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-number.html",'<div layout="row" layout-align="center center">\n    <label ng-bind="filter.column.displayName"></label>\n    <md-input-container>\n        <label>{{\'t.From\' | xpComponentsTranslate}}</label>\n        <md-input ng-model="filter.from"></md-input>\n    </md-input-container>\n    <md-input-container>\n        <label>{{\'t.To\' | xpComponentsTranslate}}</label>\n        <md-input ng-model="filter.to"></md-input>\n    </md-input-container>\n</div>')}]),t.exports="/templates/xp-gridfilter-number.html"},{}],15:[function(e,t,n){var r;try{r=angular.module("xp.components")}catch(e){r=angular.module("xp.components",[])}r.run(["$templateCache",function(e){e.put("/templates/xp-gridfilter-string.html",'<md-input-container class="md-block">\n  <label ng-bind="filter.column.displayName"></label>\n  <input type="text" ng-model="filter.value" required>\n</md-input-container>')}]),t.exports="/templates/xp-gridfilter-string.html"},{}],16:[function(e,t,n){"use strict";Rx.Observable.prototype.$apply=function(e,t){var n=this;return new Rx.AnonymousObservable(function(t){return n.subscribe(function(n){e.$apply(function(){t.onNext(n)})},t.onError.bind(t),t.onCompleted.bind(t))})}},{}],17:[function(e,t,n){"use strict";angular.module("xp.components",["ngMaterial","ngMdIcons","ui.grid","ui.grid.resizeColumns","ui.grid.moveColumns","ui.grid.infiniteScroll"]).directive("xpAutocomplete",e("./directives/xp-autocomplete")).directive("xpGrid",e("./directives/xp-grid")).directive("xpGridfilterButton",e("./directives/xp-gridfilter-button")).filter("xpComponentsTranslate",e("./filters/xpComponentsTranslate")).factory("xpGridfilterDialog",e("./services/xpGridfilterDialog")).factory("xpGridService",e("./services/xpGridService")).factory("xpComponentsTranslateService",e("./services/xpComponentsTranslateService")).run(e("./templates")),e("./utils/rx")},{"./directives/xp-autocomplete":1,"./directives/xp-grid":2,"./directives/xp-gridfilter-button":3,"./filters/xpComponentsTranslate":4,"./services/xpComponentsTranslateService":5,"./services/xpGridService":6,"./services/xpGridfilterDialog":7,"./templates":8,"./utils/rx":16}]},{},[17]);